@use "../../../../../dist/libs/tokens/scss/tokens.constants" as constants;
@use "../../../../shared/src/lib/sass/mixins/connotation/config" with (
	$connotations: accent,
	$shades: primary faint soft dim pale,
	$default: accent,
);
@use "../../../../shared/src/lib/sass/mixins/connotation" as connotation;
@use "../../../../shared/src/lib/sass/mixins/appearance/config" as appearance-config with (
	$appearances: listitem,
	$states: idle hover active selected selectedAndHover selectedAndDisabled,
	$default: listitem,
);
@use "../../../../shared/src/lib/sass/mixins/appearance" as appearance;
@use "../../../../shared/src/lib/sass/mixins/border-radius" as border-radius-variables;
@use "../../../../shared/src/lib/sass/mixins/focus" as focus;

:host {
	display: inline-block;
}

.base {
	display: inline-block;
	inline-size: 100%;
}

.control {
	inline-size: 100%;
}

.dialog {
	display: inline-flex;
	flex-direction: column;

	.footer {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		padding: 8px;
		border-top: 1px solid var(#{constants.$vvd-color-neutral-200});
		gap: 8px;
	}
}

.time-pickers {
	$item-inline-size: 50px;
	$item-block-size: 28px;
	$item-gap: 4px;
	$num-items-visible: 6;
	$num-items-to-reserve-space-for: ($num-items-visible - 1);
	@function space-for-items($n) {
		@return $item-block-size * $n + $item-gap * ($n - 1);
	}

	display: flex;
	overflow: hidden;
	padding: $item-gap;
	block-size: space-for-items($num-items-visible);
	gap: $item-gap;

	.picker {
		position: relative;
		display: flex;
		flex-direction: column;
		padding: 0;
		margin: 0;
		border-radius: #{border-radius-variables.$border-radius-semi-condensed};
		gap: $item-gap;
		inline-size: $item-inline-size;
		list-style: none;
		overflow-x: hidden;
		overflow-y: hidden;

		// Make scrollbar appearance less intrusive
		scrollbar-color: var(#{constants.$vvd-color-neutral-500}) transparent;
		scrollbar-width: thin;
		&::-webkit-scrollbar {
			background-color: transparent;
			inline-size: 8px;
		}
		&::-webkit-scrollbar-thumb {
			background-color: var(#{constants.$vvd-color-neutral-500});
			border-radius: #{border-radius-variables.$border-radius-semi-condensed};
		}

		// Hide scrollbar when not hovering
		&:hover {
			overflow-y: auto;
		}

		// Reserve space to allow scrolling items to top
		&::after {
			display: block;
			flex-shrink: 0;
			block-size: space-for-items($num-items-to-reserve-space-for);
			content: "";
		}

		&:focus-visible {
			#{focus.$focus-stroke-gap-color}: transparent;
			#{focus.$focus-inset}: -2px;
			@include focus.focus;
		}
	}


	.item {
		@include connotation.connotation (time-picker);
		@include appearance.appearance;

		position: relative;
		display: flex;
		flex-shrink: 0;
		align-items: center;
		justify-content: center;
		background-color: var(#{appearance.get-appearance-token(fill)});
		block-size: $item-block-size;
		border-radius: #{border-radius-variables.$border-radius-semi-condensed};
		color: var(#{appearance.get-appearance-token(text)});
		cursor: pointer;
		font-size: 14px;
		inline-size: $item-inline-size;
	}
}
