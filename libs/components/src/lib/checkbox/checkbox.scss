@use '../../../../shared/src/lib/sass/mixins/appearance/config' as appearance-config with (
	$appearances: fieldset,
	$states: idle hover disabled readonly,
	$default: fieldset,
);
@use '../../../../shared/src/lib/sass/mixins/appearance' as appearance;

$size: 24px;
$gutter: 4px;

.control {
	@include appearance.appearance;

	position: relative;
	display: block;
	width: $size;
	height: $size;
	background-color: var(#{appearance.get-appearance-token(fill)});
	border-radius: 6px;
	box-shadow: inset 0 0 0 1px var(#{appearance.get-appearance-token(outline)});
	color: var(#{appearance.get-appearance-token(text)});
	cursor: pointer;

	&:not(.checked) > .indicator.checkmark,
	&:not(.indeterminate) > .indicator.minus {
		display: none;
	}
}

.indicator {
	$indicator-size: calc($size - $gutter * 2);

	position: absolute;
	inset: $gutter;

	&.checkmark {
		width: $indicator-size;
		height: $indicator-size;

		> path {
			stroke: currentColor;
			stroke-dasharray: 29.7833;
			stroke-dashoffset: 29.7833;
			stroke-width: 3.12px;
			transition: stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1) 0ms;
			@at-root .control:where(.indeterminate, .checked) & {
				stroke-dashoffset: 0;
			}
		}
	}
}
