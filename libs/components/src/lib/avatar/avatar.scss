@use 'sass:list';
@use 'partials/variables' as variables;
@use '../../../../shared/src/lib/sass/utils' as utils;
@use '../../../../shared/src/lib/sass/mixins/typography' as typography;
@use '../../../../../node_modules/@vonage/vivid-tokens/dist/sass/themes/consts' as theme-consts;

@use '../../../../shared/src/lib/sass/mixins/connotation/config' with (
	$connotations: accent cta,
	$shades: primary on-primary firm,
	$default: accent,
);
@use '../../../../shared/src/lib/sass/mixins/connotation' as connotation;

@use '../../../../shared/src/lib/sass/mixins/appearance/config' as appearance-config with (
	$appearances: filled outlined ghost,
	$states: idle,
	$default: filled,
);
@use '../../../../shared/src/lib/sass/mixins/appearance' as appearance;

$density: 5 6 7 8 9 10 11 12 13 'block';
$default-density: list.nth($density, 6);


.base {
	@include connotation.connotation;
	@include appearance.appearance;

	display: inline-flex;
	overflow: hidden;
	align-items: center;
	justify-content: center;
	background-color: var(#{appearance.get-appearance-token(fill)});
	block-size: var(#{variables.$avatar-density});
	box-shadow: inset 0 0 0 1px var(#{appearance.get-appearance-token(outline)});
	color: var(#{appearance.get-appearance-token(text)});
	inline-size: var(#{variables.$avatar-density});
	vertical-align: middle;

	// TODO: fix class name that will not present density-NaN
	@include utils.spread-list-selectors('.density', $density, $default-density) using($value) {
		#{variables.$avatar-density}: calc(#{$value} * 4px);
	}

	&:not(.shape-pill) {
		border-radius: 6px;
	}

	&.shape-pill {
		border-radius: 50%;
	}

	&:where(.density-5, .density-6, .density-7, .density-8) {
		@include typography.typography-cat-shorthand('caption');
	}

	&:where( .density-9, .density-10, .density-11) {
		.initials {
			@include typography.typography-cat-shorthand('body-1-bold');
		}
		.icon {
			@include typography.typography-cat-shorthand('subtitle-2');
		}
	}

	&:where(.density-12, .density-13, .density-block) {
		.initials {
			@include typography.typography-cat-shorthand('subtitle-2');
		}
		.icon {
			@include typography.typography-cat-shorthand('subtitle-1');
		}
	}

	&:where(.density-block) {
		@include typography.typography-cat-shorthand('subtitle-2');

		aspect-ratio: 1;
		block-size: auto;
		inline-size: 100%;
	}

	.initials {
		text-transform: uppercase;
	}

	::slotted(*) {
		block-size: 100%;
		inline-size: 100%;
		object-fit: cover;
	}
}

