@use '@repo/shared/mixins/focus' as focus;
@use '@repo/shared/mixins/focus' as focus-variables;
@use '@repo/tokens/scss/tokens.constants' as constants;
@use '@repo/shared/mixins/connotation/config' with (
	$connotations: accent,
	$shades: primary primary-text primary-increment firm faint soft pale dim,
	$default: accent
);
@use '@repo/shared/mixins/connotation' as connotation;
@use '@repo/shared/mixins/appearance/config' as appearance-config with (
	$appearances: listitem,
	$states: idle hover disabled active selected selectedAndHover,
	$default: listitem
);
@use '@repo/shared/mixins/appearance' as appearance;
@use '@repo/tokens/scss/size.variables' as size;
@use '@repo/shared/mixins/border-radius' as border-radius-variables;
@use 'partials/variables' as variables;

:host([disabled]) {
	cursor: not-allowed;
}

.base {
	@include connotation.connotation(option);
	@include appearance.appearance;

	& {
		display: flex;
		box-sizing: border-box;
		align-items: center;
		border-radius: #{border-radius-variables.$border-radius-normal};
		background-color: var(#{appearance.get-appearance-token(fill)});
		box-shadow: inset 0 0 0 1px var(#{appearance.get-appearance-token(outline)});
		color: var(
			#{variables.$option-appearance-color-text},
			var(#{appearance.get-appearance-token(text)})
		);
		font: var(#{constants.$vvd-typography-base});
		gap: var(#{variables.$option-gap});
		hyphens: auto;
		inline-size: 100%;
		min-block-size: var(#{variables.$option-min-block-size});
		padding-inline: var(#{variables.$option-padding-inline});
		vertical-align: middle;
		word-break: break-word;
	}

	& {
		#{variables.$option-min-block-size}: #{size.$vvd-size-normal}; // 40px
		#{variables.$option-padding-inline}: calc(
			#{size.$vvd-size-normal} / 2.5
		); // 16px
		#{variables.$option-icon-size}: calc(#{size.$vvd-size-normal} / 2); // 20px

		&:not(.two-lines) {
			#{variables.$option-gap}: calc(
				#{size.$vvd-size-semi-condensed} / 3
			); // 12px
			padding-block: calc(
				#{size.$vvd-size-normal} / 4
			); // 10px (results in height of 40px with 1 line of text)
		}
		&.two-lines {
			gap: calc(
				#{size.$vvd-size-normal} / 2.5
			); // 16px
			padding-block: calc(
				#{size.$vvd-size-super-condensed} / 2
			); // 12px (same as menu item)
		}
	}

	:host([scale='condensed']) & {
		#{variables.$option-min-block-size}: #{size.$vvd-size-condensed}; // 32px
		#{variables.$option-padding-inline}: calc(
			#{size.$vvd-size-super-condensed} / 2
		); // 12px
		#{variables.$option-icon-size}: calc(
			#{size.$vvd-size-normal} / 2.5
		); // 16px
		&:not(.two-lines) {
			#{variables.$option-gap}: calc(#{size.$vvd-size-normal} / 5); // 8px
			padding-block: calc(
				#{size.$vvd-size-semi-condensed} / 6
			); // 6px (results in height of 32px with 1 line of text)
		}
		&.two-lines {
			gap: calc(
				#{size.$vvd-size-semi-condensed} / 3
			); // 12px
			padding-block: calc(#{size.$vvd-size-condensed} / 4); // 8px (+2px, like normal size)
		}
	}

	@supports (user-select: none) {
		user-select: none;
	}

	&:not(.disabled) {
		cursor: pointer;
	}

	&.disabled {
		pointer-events: none;
	}

	&.active {
		#{focus-variables.$focus-stroke-color}: var(
			#{constants.$vvd-color-cta-500}
		);
		#{focus-variables.$focus-stroke-gap-color}: transparent;

		@include focus.focus;
	}

	&.hidden {
		display: none;
	}
}

.text {
	font: var(#{constants.$vvd-typography-base});
	margin-inline-end: auto;
}

.text-primary,
.text-secondary {
	display: block;
	font: var(#{constants.$vvd-typography-base});
}

.text-primary {
	font: var(#{constants.$vvd-typography-base});
	.base:not(.disabled) & {
		color: var(#{constants.$vvd-color-canvas-text});
	}
	.base.disabled & {
		color: var(#{appearance.get-appearance-token(text)});
	}
	.base.two-lines & {
		font: var(#{constants.$vvd-typography-base-bold});
	}
}

.text-secondary {
	color: var(#{constants.$vvd-color-neutral-800});
	font: var(#{constants.$vvd-typography-base-condensed});

	.base.two-lines & {
		color: var(#{constants.$vvd-color-neutral-600});
	}

	.base.disabled & {
		color: var(#{appearance.get-appearance-token(text)});
	}

	.base.selected:not(.disabled) & {
		color: var(#{constants.$vvd-color-neutral-800});
	}
}

.match {
	color: var(#{constants.$vvd-color-cta-600});
	font: var(#{constants.$vvd-typography-base-bold});
}

slot[name='icon'] {
	font-size: var(#{variables.$option-icon-size});
	line-height: 1;

	.base:not(.disabled, .selected) & {
		color: var(#{constants.$vvd-color-neutral-600});
	}
}

.checkmark {
	font-size: var(#{variables.$option-icon-size});
}
