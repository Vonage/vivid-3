@use '../../../../../../../node_modules/@vonage/vivid-tokens/dist/sass/themes/consts' as theme-consts;
@use '../connotation' as connotation;
@use '../../functions' as functions;
@use 'variables' as variables;
@use 'config' as config;
@use 'sass:selector';
@use 'sass:list';
@use 'sass:map';


////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
@function get-variable($type) {
  $prefix: --_appearance-color;
  @return #{$prefix}-#{$type};
}

$selectors: (
  idle: '&',
  hover: '&:hover:not(:disabled, .disabled), &.hovered:not(:disabled, .disabled)',
  disabled: '&:disabled , &.disabled',
  selected: '&.selected',
  active: '&:active:not(:disabled, .disabled), &.active:not(:disabled, .disabled)',
  error: '&.error:not(:disabled, .disabled)',
);

@function get-default-selector($appearance) {
  @return '&';
}

@mixin appearance {

  @each $state in config.$states {
    #{map.get($selectors, $state)} {

      $state-mapping: map.get(variables.$states-mapping, $state);

      @each $appearance in config.$appearances {
        $selector: if($appearance == config.$default, get-default-selector($appearance), '&.appearance-#{$appearance}');


        #{$selector} {
          $appearance-mapping: map.get($state-mapping, $appearance);
          @each $type, $key in $appearance-mapping {
            #{get-variable($type)}: $key;
          }
        }
      }
    }
  }
}

