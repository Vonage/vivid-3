on:
  push:
    branches:
      - VIV-1281-fix-release-please-for-all-of-our-packages

name: release-please
jobs:
  release-please:
    runs-on: ubuntu-latest
    outputs:
      releases_created: ${{ steps.release.outputs.releases_created }}
    steps:
      - uses: google-github-actions/release-please-action@v3
        id: release
        with:
          release-type: node
          path: libs/components
          package-name: vivid
          monorepo-tags: true
          bootstrap-sha: 3f548d7c4a9264505451d7c6880654ff1ba66730
          default-branch: VIV-1281-fix-release-please-for-all-of-our-packages

  # echo needs.release-please.outputs
  # Create a publish script that handles the outputs
  echo:
    runs-on: ubuntu-latest
    needs: release-please
    steps:
      - run: |
          echo "Releases created: ${{ needs.release-please.outputs.releases_created }}"
          echo "Releases output: ${{toJSON(steps.release.outputs)}}"
